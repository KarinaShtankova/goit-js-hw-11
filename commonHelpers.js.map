{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// iziToast\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// const loadText = '<p class=\"text\">Loading images, please wait...</p>'\nconst options = {\n  method: 'GET',\n};\n\nlet searchName = 'cat';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  input: document.querySelector('.input'),\n  btn: document.querySelector('.btn'),\n  gallery: document.querySelector('.gallery-list'),\n  loader: document.querySelector('span'),\n};\n\nrefs.input.addEventListener('input', onInputSearch);\nrefs.btn.addEventListener('click', onBtnSubmitClick);\n\nfunction onInputSearch(event) {\n  searchName = event.target.value;\n  // console.log(event.target.value);\n}\n\nfunction onBtnSubmitClick(event) {\n  event.preventDefault();\n  refs.loader.hidden = false;\n  refs.loader.classList.add('loader');\n\n  // console.log('Loading images, please wait...');\n\n  fetch(\n    `https://pixabay.com/api/?key=41464538-044fa7fe64ee4a60fb4972757&q=${searchName}&image_type=photo&orientation=horizontal&safesearch=true`,\n    options\n  )\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .then(data => {\n      if (!data.total) {\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        // window.alert('Sorry, there are no images matching your search query. Please try again!');\n      } else {\n        // console.log(data.hits);\n        const imagesData = data.hits;\n        const images = imagesData.map(image => {\n          return {\n            preview: image.webformatURL,\n            original: image.largeImageURL,\n            description: image.tags,\n            views: image.views,\n            comments: image.comments,\n            downloads: image.downloads,\n            likes: image.likes,\n          };\n        });\n        const galleryString = images.reduce(\n          (\n            html,\n            {\n              preview,\n              original,\n              description,\n              views,\n              comments,\n              downloads,\n              likes,\n            }\n          ) => {\n            return (\n              html +\n              `<li class=\"gallery\">\n          <a class=\"gallery-link\" href=${original} >       \n           <img\n            class=\"gallery-image\"\n            src=${preview}\n            alt=\"${description}\"\n            />          <ul class=\"desc\">\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">likes</h2>\n              <p class=\"desc-text\">${likes}</p>\n            </li>\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">views</h2>\n              <p class=\"desc-text\">${views}</p>\n            </li>\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">comments</h2>\n              <p class=\"desc-text\">${comments}</p>\n            </li>\n            <li class=\"desc-item\">\n              <h2 class=\"desc-title\">downloads</h2>\n              <p class=\"desc-text\">${downloads}</p>\n            </li>\n          </ul></a>\n        </li>`\n            );\n          },\n          ''\n        );\n\n        refs.gallery.insertAdjacentHTML('afterbegin', galleryString);\n        const lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n        lightbox.refresh();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      // console.log('End loading...');\n      refs.loader.classList.remove('loader');\n      refs.loader.hidden = true;\n    });\n\n  refs.form.reset();\n  refs.gallery.innerHTML = '';\n}\n"],"names":["options","searchName","refs","onInputSearch","onBtnSubmitClick","event","response","data","iziToast","galleryString","image","html","preview","original","description","views","comments","downloads","likes","SimpleLightbox","error"],"mappings":"6vBAUA,MAAMA,EAAU,CACd,OAAQ,KACV,EAEA,IAAIC,EAAa,MAEjB,MAAMC,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,QAAQ,EACtC,IAAK,SAAS,cAAc,MAAM,EAClC,QAAS,SAAS,cAAc,eAAe,EAC/C,OAAQ,SAAS,cAAc,MAAM,CACvC,EAEAA,EAAK,MAAM,iBAAiB,QAASC,CAAa,EAClDD,EAAK,IAAI,iBAAiB,QAASE,CAAgB,EAEnD,SAASD,EAAcE,EAAO,CAC5BJ,EAAaI,EAAM,OAAO,KAE5B,CAEA,SAASD,EAAiBC,EAAO,CAC/BA,EAAM,eAAc,EACpBH,EAAK,OAAO,OAAS,GACrBA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAIlC,MACE,qEAAqED,4DACrED,CACD,EACE,KAAKM,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACtB,CAAK,EACA,KAAKC,GAAQ,CACZ,GAAI,CAACA,EAAK,MACRC,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACZ,CAAS,MAEI,CAcL,MAAMC,EAZaF,EAAK,KACE,IAAIG,IACrB,CACL,QAASA,EAAM,aACf,SAAUA,EAAM,cAChB,YAAaA,EAAM,KACnB,MAAOA,EAAM,MACb,SAAUA,EAAM,SAChB,UAAWA,EAAM,UACjB,MAAOA,EAAM,KACzB,EACS,EAC4B,OAC3B,CACEC,EACA,CACE,QAAAC,EACA,SAAAC,EACA,YAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,EACA,MAAAC,CACD,IAGCP,EACA;AAAA,yCAC2BE;AAAA;AAAA;AAAA,kBAGvBD;AAAA,mBACCE;AAAA;AAAA;AAAA;AAAA,qCAIkBI;AAAA;AAAA;AAAA;AAAA,qCAIAH;AAAA;AAAA;AAAA;AAAA,qCAIAC;AAAA;AAAA;AAAA;AAAA,qCAIAC;AAAA;AAAA;AAAA,eAM3B,EACV,EAEQf,EAAK,QAAQ,mBAAmB,aAAcO,CAAa,EAC1C,IAAIU,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GACxB,CAAS,EACQ,QAAO,CACjB,CACP,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CAEblB,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCA,EAAK,OAAO,OAAS,EAC3B,CAAK,EAEHA,EAAK,KAAK,QACVA,EAAK,QAAQ,UAAY,EAC3B"}